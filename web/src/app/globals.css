@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   MODERN DESIGN SYSTEM - CSS VARIABLES
   ============================================ */

@layer base {
  :root {
    /* Color System - Light Mode */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --success: 142.1 76.2% 36.3%;
    --success-foreground: 355.7 100% 97.3%;
    --warning: 32.1 94.6% 43.7%;
    --warning-foreground: 210 40% 98%;
    --info: 199.3 89.1% 48.4%;
    --info-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.75rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

/* ============================================
   BASE STYLES & TYPOGRAPHY
   ============================================ */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-gradient-to-br from-gray-50 to-slate-100 text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight text-gray-900;
  }

  h1 {
    @apply text-4xl md:text-5xl;
  }

  h2 {
    @apply text-3xl md:text-4xl;
  }

  h3 {
    @apply text-2xl md:text-3xl;
  }

  h4 {
    @apply text-xl md:text-2xl;
  }

  h5 {
    @apply text-lg md:text-xl;
  }

  h6 {
    @apply text-base md:text-lg;
  }
}

/* ============================================
   MODERN UTILITY CLASSES
   ============================================ */

@layer components {
  /* Glass Morphism Effects */
  .glass {
    @apply bg-white/80 backdrop-blur-xl border border-white/40 shadow-elegant;
  }

  .glass-dark {
    @apply bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 shadow-elegant;
  }

  /* Modern Card Styles */
  .card-modern {
    @apply bg-white rounded-2xl shadow-elegant border border-gray-100 
           transition-all duration-300 hover:shadow-elegant-lg hover:-translate-y-1;
  }

  .card-gradient {
    @apply bg-gradient-to-br from-white via-gray-50/30 to-white 
           rounded-2xl shadow-elegant border border-gray-100;
  }

  .card-glow {
    @apply card-modern relative overflow-hidden;
  }

  .card-glow::before {
    @apply absolute inset-0 opacity-0 transition-opacity duration-500;
    content: '';
    background: radial-gradient(600px at var(--mouse-x) var(--mouse-y), rgba(59, 130, 246, 0.1), transparent 40%);
  }

  .card-glow:hover::before {
    @apply opacity-100;
  }

  /* Button Enhancements */
  .btn-modern {
    @apply relative overflow-hidden rounded-xl font-semibold transition-all duration-300 
           shadow-sm hover:shadow-md active:scale-95;
  }

  .btn-primary-modern {
    @apply btn-modern bg-gradient-to-r from-blue-600 to-indigo-600 text-white
           hover:from-blue-700 hover:to-indigo-700;
  }

  .btn-success-modern {
    @apply btn-modern bg-gradient-to-r from-green-600 to-emerald-600 text-white
           hover:from-green-700 hover:to-emerald-700;
  }

  .btn-warning-modern {
    @apply btn-modern bg-gradient-to-r from-amber-600 to-orange-600 text-white
           hover:from-amber-700 hover:to-orange-700;
  }

  /* Input Styles */
  .input-modern {
    @apply rounded-xl border-2 border-gray-200 bg-white px-4 py-3 
           transition-all duration-200 
           focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 focus:outline-none
           placeholder:text-gray-400 hover:border-gray-300;
  }

  /* Badge Styles */
  .badge-modern {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold 
           transition-all duration-200 hover:scale-105;
  }

  .badge-success {
    @apply bg-green-100 text-green-700 border border-green-200;
  }

  .badge-warning {
    @apply bg-amber-100 text-amber-700 border border-amber-200;
  }

  .badge-error {
    @apply bg-red-100 text-red-700 border border-red-200;
  }

  .badge-info {
    @apply bg-blue-100 text-blue-700 border border-blue-200;
  }

  /* Status Colors */
  .status-paid {
    @apply inline-flex items-center gap-1.5 bg-green-100 text-green-700 
           border-2 border-green-300 font-semibold px-3 py-1.5 rounded-lg
           transition-all duration-200 hover:scale-105;
  }

  .status-pending {
    @apply inline-flex items-center gap-1.5 bg-amber-100 text-amber-700 
           border-2 border-amber-300 font-semibold px-3 py-1.5 rounded-lg
           transition-all duration-200 hover:scale-105;
  }

  .status-cancelled {
    @apply inline-flex items-center gap-1.5 bg-red-100 text-red-700 
           border-2 border-red-300 font-semibold px-3 py-1.5 rounded-lg
           transition-all duration-200 hover:scale-105;
  }

  .status-phone {
    @apply inline-flex items-center gap-1.5 bg-blue-100 text-blue-700 
           border-2 border-blue-300 font-semibold px-3 py-1.5 rounded-lg
           transition-all duration-200 hover:scale-105;
  }

  .status-hold {
    @apply inline-flex items-center gap-1.5 bg-orange-100 text-orange-700 
           border-2 border-orange-300 font-semibold px-3 py-1.5 rounded-lg
           transition-all duration-200 hover:scale-105;
  }

  /* Elegant Hover Effects */
  .hover-lift {
    @apply transition-all duration-300 hover:-translate-y-1 hover:shadow-elegant-lg;
  }

  .hover-scale {
    @apply transition-transform duration-300 hover:scale-105;
  }

  .hover-glow-blue {
    @apply transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)];
  }

  .hover-glow-green {
    @apply transition-all duration-300 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)];
  }

  .hover-glow-purple {
    @apply transition-all duration-300 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)];
  }
}

/* ============================================
   TABLE ENHANCEMENTS
   ============================================ */

@layer components {
  .table-modern {
    @apply w-full border-collapse bg-white rounded-xl overflow-hidden shadow-elegant;
  }

  .table-modern thead {
    @apply bg-gradient-to-r from-gray-50 via-slate-50 to-gray-50;
  }

  .table-modern th {
    @apply px-6 py-4 text-left text-sm font-bold text-gray-900 
           border-b-2 border-gray-200 uppercase tracking-wide;
  }

  .table-modern td {
    @apply px-6 py-4 text-sm text-gray-700 border-b border-gray-100;
  }

  .table-modern tbody tr {
    @apply transition-all duration-200 hover:bg-blue-50/50 hover:shadow-sm;
  }

  .table-modern tbody tr:last-child td {
    @apply border-b-0;
  }

  /* Alternating rows */
  .table-modern tbody tr:nth-child(even) {
    @apply bg-gray-50/30;
  }

  /* Sticky column support */
  .table-sticky-col {
    @apply sticky left-0 z-10 bg-white;
  }

  .table-modern tbody tr:nth-child(even) .table-sticky-col {
    @apply bg-gray-50/30;
  }

  .table-modern tbody tr:hover .table-sticky-col {
    @apply bg-blue-50/50;
  }
}

/* ============================================
   NAVIGATION & MENU STYLES
   ============================================ */

@layer components {
  .nav-modern {
    @apply bg-white/95 backdrop-blur-lg border-b border-gray-200 
           shadow-elegant sticky top-0 z-50;
  }

  .nav-item {
    @apply px-4 py-2.5 rounded-xl font-semibold text-gray-700 
           transition-all duration-200 
           hover:bg-blue-50 hover:text-blue-600 hover:scale-105;
  }

  .nav-item-active {
    @apply bg-gradient-to-r from-blue-500 to-indigo-600 text-white 
           shadow-md hover:from-blue-600 hover:to-indigo-700;
  }

  .sidebar-modern {
    @apply bg-white border-r border-gray-200 shadow-elegant-lg;
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl font-medium text-gray-700
           transition-all duration-200 
           hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 
           hover:text-blue-700 hover:pl-5;
  }

  .sidebar-item-active {
    @apply bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 
           font-semibold shadow-sm pl-5;
  }
}

/* ============================================
   FORM ELEMENTS
   ============================================ */

@layer components {
  .form-label {
    @apply block text-sm font-semibold text-gray-700 mb-2;
  }

  .form-input {
    @apply w-full px-4 py-3 rounded-xl border-2 border-gray-200 
           bg-white text-gray-900 
           transition-all duration-200 
           focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 
           focus:outline-none hover:border-gray-300
           placeholder:text-gray-400;
  }

  .form-select {
    @apply form-input appearance-none cursor-pointer 
           bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')]
           bg-[length:1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10;
  }

  .form-textarea {
    @apply form-input resize-y min-h-[120px];
  }

  .form-checkbox {
    @apply w-5 h-5 rounded-md border-2 border-gray-300 text-blue-600 
           focus:ring-2 focus:ring-blue-500/20 
           transition-colors duration-200 cursor-pointer;
  }

  .form-radio {
    @apply w-5 h-5 border-2 border-gray-300 text-blue-600 
           focus:ring-2 focus:ring-blue-500/20 
           transition-colors duration-200 cursor-pointer;
  }
}

/* ============================================
   ALERT & NOTIFICATION STYLES
   ============================================ */

@layer components {
  .alert {
    @apply px-5 py-4 rounded-xl border-l-4 font-medium shadow-sm
           animate-slide-down;
  }

  .alert-success {
    @apply bg-green-50 border-green-500 text-green-900;
  }

  .alert-warning {
    @apply bg-amber-50 border-amber-500 text-amber-900;
  }

  .alert-error {
    @apply bg-red-50 border-red-500 text-red-900;
  }

  .alert-info {
    @apply bg-blue-50 border-blue-500 text-blue-900;
  }
}

/* ============================================
   STAT CARD STYLES
   ============================================ */

@layer components {
  .stat-card {
    @apply card-modern p-6 relative overflow-hidden;
  }

  .stat-card::after {
    content: '';
    @apply absolute top-0 right-0 w-32 h-32 
           bg-gradient-to-br from-transparent to-current 
           opacity-5 rounded-full -mr-16 -mt-16;
  }

  .stat-card-blue {
    @apply stat-card border-blue-200 hover:border-blue-300;
  }

  .stat-card-blue::after {
    @apply text-blue-500;
  }

  .stat-card-green {
    @apply stat-card border-green-200 hover:border-green-300;
  }

  .stat-card-green::after {
    @apply text-green-500;
  }

  .stat-card-amber {
    @apply stat-card border-amber-200 hover:border-amber-300;
  }

  .stat-card-amber::after {
    @apply text-amber-500;
  }

  .stat-card-red {
    @apply stat-card border-red-200 hover:border-red-300;
  }

  .stat-card-red::after {
    @apply text-red-500;
  }
}

/* ============================================
   LOADING & SKELETON STYLES
   ============================================ */

@layer components {
  .skeleton {
    @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 
           bg-[length:200%_100%] animate-shimmer rounded;
  }

  .loading-spinner {
    @apply inline-block w-8 h-8 border-4 border-gray-200 
           border-t-blue-600 rounded-full animate-spin;
  }

  .loading-dots {
    @apply inline-flex gap-1;
  }

  .loading-dots span {
    @apply w-2 h-2 bg-blue-600 rounded-full animate-bounce;
  }

  .loading-dots span:nth-child(1) {
    animation-delay: 0s;
  }

  .loading-dots span:nth-child(2) {
    animation-delay: 0.1s;
  }

  .loading-dots span:nth-child(3) {
    animation-delay: 0.2s;
  }
}

/* ============================================
   SCROLLBAR STYLING
   ============================================ */

@layer base {
  ::-webkit-scrollbar {
    @apply w-3 h-3;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full hover:bg-gray-400 
           transition-colors duration-200;
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: #d1d5db #f3f4f6;
  }
}

/* ============================================
   ACCESSIBILITY IMPROVEMENTS
   ============================================ */

@layer base {
  /* Focus visible for keyboard navigation */
  *:focus-visible {
    @apply outline-none ring-4 ring-blue-500/20 ring-offset-2 ring-offset-white
           rounded-lg;
  }

  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ============================================
   STICKY COLUMN FOR TABLES
   ============================================ */

@layer utilities {
  .sticky-column {
    position: sticky !important;
    left: 0 !important;
    z-index: 10 !important;
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.15);
  }
  
  /* Ensure sticky column inherits background from parent row */
  tbody tr .sticky-column {
    background-color: inherit;
  }
  
  /* Sticky header for the column */
  thead tr .sticky-column {
    z-index: 20 !important;
    background-color: rgb(243, 232, 255) !important; /* bg-purple-100 */
  }
  
  /* Enhanced shadow on hover */
  tbody tr:hover .sticky-column {
    box-shadow: 3px 0 8px rgba(0, 0, 0, 0.2);
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  body {
    @apply bg-white text-black;
  }

  .no-print {
    display: none !important;
  }

  .print-break {
    page-break-after: always;
  }
}

/* ============================================
   MOBILE RESPONSIVE & TOUCH-FRIENDLY STYLES
   ============================================ */

@layer utilities {
  /* Touch-friendly tap targets (minimum 44x44px) */
  .tap-target {
    @apply min-h-[44px] min-w-[44px];
  }

  .tap-target-sm {
    @apply min-h-[36px] min-w-[36px];
  }

  /* Mobile-friendly spacing */
  .mobile-padding {
    @apply px-4 py-3 sm:px-6 sm:py-4;
  }

  .mobile-spacing {
    @apply space-y-3 sm:space-y-4 md:space-y-6;
  }

  /* Mobile-optimized text sizes */
  .text-mobile-xs {
    @apply text-xs sm:text-sm;
  }

  .text-mobile-sm {
    @apply text-sm sm:text-base;
  }

  .text-mobile-base {
    @apply text-base sm:text-lg;
  }

  .text-mobile-lg {
    @apply text-lg sm:text-xl md:text-2xl;
  }

  .text-mobile-xl {
    @apply text-xl sm:text-2xl md:text-3xl;
  }

  /* Mobile-friendly buttons */
  .btn-mobile {
    @apply px-4 py-3 text-base font-medium rounded-lg
           active:scale-95 transition-transform duration-100;
  }

  .btn-mobile-sm {
    @apply px-3 py-2 text-sm font-medium rounded-md
           active:scale-95 transition-transform duration-100;
  }

  /* Horizontal scroll with snap for mobile tables */
  .mobile-table-scroll {
    @apply overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0
           scroll-smooth snap-x snap-mandatory;
  }

  .mobile-table-scroll::-webkit-scrollbar {
    @apply h-2;
  }

  .mobile-table-scroll::-webkit-scrollbar-track {
    @apply bg-gray-100;
  }

  .mobile-table-scroll::-webkit-scrollbar-thumb {
    @apply bg-blue-500 rounded-full;
  }

  /* Mobile-optimized cards */
  .mobile-card {
    @apply bg-white rounded-lg shadow-md p-4 sm:p-6
           hover:shadow-lg transition-shadow duration-200;
  }

  /* Stack on mobile, row on desktop */
  .mobile-stack {
    @apply flex flex-col sm:flex-row gap-3 sm:gap-4;
  }

  /* Grid responsive layouts */
  .mobile-grid-2 {
    @apply grid grid-cols-1 sm:grid-cols-2 gap-4;
  }

  .mobile-grid-3 {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4;
  }

  .mobile-grid-4 {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4;
  }

  /* Mobile modal fullscreen */
  .mobile-modal {
    @apply fixed inset-0 sm:inset-auto sm:relative 
           w-full h-full sm:w-auto sm:h-auto sm:max-w-2xl
           rounded-none sm:rounded-lg;
  }

  /* Hide on mobile, show on desktop */
  .hide-mobile {
    @apply hidden sm:block;
  }

  /* Show on mobile, hide on desktop */
  .show-mobile {
    @apply block sm:hidden;
  }

  /* Mobile-friendly form inputs */
  .mobile-input {
    @apply text-base px-4 py-3 sm:text-sm sm:px-3 sm:py-2
           border-2 border-gray-300 rounded-lg
           focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20
           transition-all duration-200;
  }

  /* Touch-friendly select dropdowns */
  .mobile-select {
    @apply text-base px-4 py-3 sm:text-sm sm:px-3 sm:py-2
           border-2 border-gray-300 rounded-lg bg-white
           focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20
           transition-all duration-200 appearance-none;
  }

  /* Mobile navigation */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 z-50 
           bg-white border-t border-gray-200 shadow-lg
           sm:static sm:border-0 sm:shadow-none;
  }

  /* Overlay for mobile menus */
  .mobile-overlay {
    @apply fixed inset-0 bg-black/50 z-40
           backdrop-blur-sm sm:hidden;
  }

  /* Mobile sidebar */
  .mobile-sidebar {
    @apply fixed top-0 left-0 h-full w-64 bg-white shadow-xl
           transform transition-transform duration-300 ease-in-out z-50
           -translate-x-full;
  }

  .mobile-sidebar.open {
    @apply translate-x-0;
  }

  /* Safe area padding for notched phones */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Mobile-specific media queries */
@media (max-width: 640px) {
  /* Ensure body doesn't have horizontal overflow */
  body {
    @apply overflow-x-hidden;
  }

  /* Prevent any element from causing horizontal scroll */
  * {
    max-width: 100vw;
  }

  /* Larger touch targets on mobile */
  button, a, input, select, textarea {
    @apply min-h-[44px];
  }

  /* Reduce padding on mobile */
  .container {
    @apply px-4;
  }

  /* Stack tables vertically on mobile */
  table {
    @apply text-xs;
  }

  /* Make modals fullscreen on mobile */
  .modal-content {
    @apply fixed inset-0 rounded-none;
  }

  /* Prevent pagination from causing overflow */
  nav, .pagination-container {
    overflow-x: hidden;
  }
}

/* Tablet-specific styles */
@media (min-width: 641px) and (max-width: 1024px) {
  .tablet-hidden {
    @apply hidden;
  }

  .tablet-visible {
    @apply block;
  }
}

/* Landscape phone orientation */
@media (max-width: 900px) and (orientation: landscape) {
  /* Reduce vertical padding in landscape mode */
  .landscape-compact {
    @apply py-2;
  }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .retina-optimized {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}
